---
layout: post
title: 'Rust 1.73.0: –æ—á–∏—â–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø–∞–Ω–∏–∫–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ä–∞–±–æ—Ç–µ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞'
author: The Rust Release Team
release: 'true'
---

–ö–æ–º–∞–Ω–¥–∞ Rust —Ä–∞–¥–∞ —Å–æ–æ–±—â–∏—Ç—å –æ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ —è–∑—ã–∫–∞ ‚Äî 1.73.0. Rust ‚Äî —ç—Ç–æ —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∫–∞–∂–¥–æ–º—É —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–¥—ë–∂–Ω–æ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ.

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è Rust, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —á–µ—Ä–µ–∑ `rustup`, —Ç–æ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ –≤–µ—Ä—Å–∏–∏ 1.73.0 –≤–∞–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É:

```console
rustup update stable
```

–ï—Å–ª–∏ —É –≤–∞—Å –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `rustup`, –≤—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ —Å [—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã](https://www.rust-lang.org/install.html) –Ω–∞—à–µ–≥–æ –≤–µ–±-—Å–∞–π—Ç–∞, –∞ —Ç–∞–∫–∂–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [–ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è –∫ –≤—ã–ø—É—Å–∫—É](https://github.com/rust-lang/rust/releases/tag/1.73.0) –Ω–∞ GitHub.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–º–æ—á—å –Ω–∞–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±—É–¥—É—â–∏–µ –≤—ã–ø—É—Å–∫–∏, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å beta (`rustup default beta`) –∏–ª–∏ nightly (`rustup default nightly`) –∫–∞–Ω–∞–ª. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, [—Å–æ–æ–±—â–∞–π—Ç–µ](https://github.com/rust-lang/rust/issues/new/choose) –æ–±–æ –≤—Å–µ—Ö –≤—Å—Ç—Ä–µ—á–µ–Ω–Ω—ã—Ö –≤–∞–º–∏ –æ—à–∏–±–∫–∞—Ö.

## –ß—Ç–æ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –≤ 1.73.0

## –°–æ–æ–±—â–µ–Ω–∏—è –ø–∞–Ω–∏–∫–∏ —Å—Ç–∞–ª–∏ —á–∏—â–µ

–ú—ã –∏–∑–º–µ–Ω–∏–ª–∏ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –ø–∞–Ω–∏–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —á—Ç–æ–±—ã –ø–æ–º–µ—Å—Ç–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É (–∞ –Ω–µ –∑–∞–∫–ª—é—á–∞—Ç—å –≤ –∫–∞–≤—ã—á–∫–∏, –∫–∞–∫ —Ä–∞–Ω—å—à–µ). –≠—Ç–æ –º–æ–∂–µ—Ç –æ–±–ª–µ–≥—á–∏—Ç—å —á—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–∞–Ω–∏–∫–∏, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ:

<div style="margin:1em">
<pre>&lt;code&gt;fn main() {
    let file = "ferris.txt";
    panic!("oh no! {file:?} not found!");
}&lt;/code&gt;</pre> –í—ã–≤–æ–¥ –¥–æ Rust 1.73: <pre style="margin-top:0">&lt;code style="background:#000;color:#ccc" class="language-text"&gt;thread 'main' panicked at 'oh no! "ferris.txt" not found!', src/main.rs:3:5&lt;/code&gt;</pre> –í—ã–≤–æ–¥ –Ω–∞—á–∏–Ω–∞—è —Å Rust 1.73: <pre style="margin-top:0">&lt;code style="background:#000;color:#ccc" class="language-text"&gt;thread 'main' panicked at src/main.rs:3:5:
oh no! "ferris.txt" not found!&lt;/code&gt;</pre>
</div>

–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω–æ–µ, —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –∏–ª–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ `assert_eq` –∏ `assert_ne`: –ø–µ—Ä–µ–º–µ—â–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (—Ç—Ä–µ—Ç–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç) –∏ —É–¥–∞–ª–µ–Ω–∞ –Ω–µ–Ω—É–∂–Ω–∞—è –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∏–∂–µ:

<div style="margin:1em">
<pre>&lt;code&gt;fn main() {
    assert_eq!("ü¶Ä", "üêü", "ferris - —ç—Ç–æ –Ω–µ —Ä—ã–±–∞");
}&lt;/code&gt;</pre> –í—ã–≤–æ–¥ –¥–æ Rust 1.73: <pre style="margin-top:0">&lt;code style="background:#000;color:#ccc" class="language-text"&gt;thread 'main' panicked at 'assertion failed: `(left == right)`
 left: `"ü¶Ä"`,
right: `"üêü"`: ferris - —ç—Ç–æ –Ω–µ —Ä—ã–±–∞', src/main.rs:2:5&lt;/code&gt;</pre> –í—ã–≤–æ–¥ –Ω–∞—á–∏–Ω–∞—è —Å Rust 1.73: <pre style="margin-top:0">&lt;code style="background:#000;color:#ccc" class="language-text"&gt;thread 'main' panicked at src/main.rs:2:5:
assertion `left == right` failed: ferris - —ç—Ç–æ –Ω–µ —Ä—ã–±–∞
 left: "ü¶Ä"
right: "üêü"&lt;/code&gt;</pre>
</div>

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞

–ö–∞–∫ –±—ã–ª–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –≤ [RFC 3184](https://github.com/rust-lang/rfcs/blob/master/text/3184-thread-local-cell-methods.md), —Å `LocalKey<Cell<T>>` –∏ `LocalKey<RefCell<T>>` —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø—Ä—è–º—É—é —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–æ–≤ `get()`, `set()`, `take()` –∏ `replace()`, –∞ –Ω–µ –ø—Ä—ã–≥–∞—Ç—å –≤ –∑–∞–º—ã–∫–∞–Ω–∏–µ `with(|inner| ...)`, –∫–∞–∫ –Ω—É–∂–Ω–æ –¥–ª—è –æ–±—â–µ–π —Ä–∞–±–æ—Ç—ã `LocalKey`. `LocalKey<T>` ‚Äî —ç—Ç–æ —Ç–∏–ø —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö `thread_local!`.

–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–µ–ª–∞—é—Ç –∫–æ–¥ –±–æ–ª–µ–µ –∫—Ä–∞—Ç–∫–∏–º –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–∑–±–µ–∂–∞—Ç—å –∑–∞–ø—É—Å–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤ `thread_local!` –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.

```rust
thread_local! {
    static THINGS: Cell<Vec<i32>> = Cell::new(Vec::new());
}

fn f() {
    // —Ä–∞–Ω—å—à–µ:
    THINGS.with(|i| i.set(vec![1, 2, 3]));
    // —Ç–µ–ø–µ—Ä—å:
    THINGS.set(vec![1, 2, 3]);

    // ...

    // —Ä–∞–Ω—å—à–µ:
    let v = THINGS.with(|i| i.take());
    // —Ç–µ–ø–µ—Ä—å:
    let v: Vec<i32> = THINGS.take();
}
```

### –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ API

- [–ë–µ–∑–∑–Ω–∞–∫–æ–≤—ã–µ `{integer}::div_ceil`](https://doc.rust-lang.org/stable/std/primitive.u32.html#method.div_ceil)
- [–ë–µ–∑–∑–Ω–∞–∫–æ–≤—ã–µ `{integer}::next_multiple_of`](https://doc.rust-lang.org/stable/std/primitive.u32.html#method.next_multiple_of)
- [–ë–µ–∑–∑–Ω–∞–∫–æ–≤—ã–µ `{integer}::checked_next_multiple_of`](https://doc.rust-lang.org/stable/std/primitive.u32.html#method.checked_next_multiple_of)
- [`std::ffi::FromBytesUntilNulError`](https://doc.rust-lang.org/stable/std/ffi/struct.FromBytesUntilNulError.html)
- [`std::os::unix::fs::chown`](https://doc.rust-lang.org/stable/std/os/unix/fs/fn.chown.html)
- [`std::os::unix::fs::fchown`](https://doc.rust-lang.org/stable/std/os/unix/fs/fn.fchown.html)
- [`std::os::unix::fs::lfchown`](https://doc.rust-lang.org/stable/std/os/unix/fs/fn.lchown.html)
- [`LocalKey::<Cell<T>>::get`](https://doc.rust-lang.org/stable/std/thread/struct.LocalKey.html#method.get)
- [`LocalKey::<Cell<T>>::set`](https://doc.rust-lang.org/stable/std/thread/struct.LocalKey.html#method.set)
- [`LocalKey::<Cell<T>>::take`](https://doc.rust-lang.org/stable/std/thread/struct.LocalKey.html#method.take)
- [`LocalKey::<Cell<T>>::replace`](https://doc.rust-lang.org/stable/std/thread/struct.LocalKey.html#method.replace)
- [`LocalKey::<RefCell<T>>::with_borrow`](https://doc.rust-lang.org/stable/std/thread/struct.LocalKey.html#method.with_borrow)
- [`LocalKey::<RefCell<T>>::with_borrow_mut`](https://doc.rust-lang.org/stable/std/thread/struct.LocalKey.html#method.with_borrow_mut)
- [`LocalKey::<RefCell<T>>::set`](https://doc.rust-lang.org/stable/std/thread/struct.LocalKey.html#method.set-1)
- [`LocalKey::<RefCell<T>>::take`](https://doc.rust-lang.org/stable/std/thread/struct.LocalKey.html#method.take-1)
- [`LocalKey::<RefCell<T>>::replace`](https://doc.rust-lang.org/stable/std/thread/struct.LocalKey.html#method.replace-1)

–°–ª–µ–¥—É—é—â–∏–µ API —Ç–µ–ø–µ—Ä—å –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ `const`:

- [`rc::Weak::new`](https://doc.rust-lang.org/stable/alloc/rc/struct.Weak.html#method.new)
- [`sync::Weak::new`](https://doc.rust-lang.org/stable/alloc/sync/struct.Weak.html#method.new)
- [`NonNull::as_ref`](https://doc.rust-lang.org/stable/core/ptr/struct.NonNull.html#method.as_ref)

### –ü—Ä–æ—á–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å—ë, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ [Rust](https://github.com/rust-lang/rust/releases/tag/1.73.0), [Cargo](https://github.com/rust-lang/cargo/blob/master/CHANGELOG.md#cargo-173-2023-10-05) –∏ [Clippy](https://github.com/rust-lang/rust-clippy/blob/master/CHANGELOG.md#rust-173).

## –£—á–∞—Å—Ç–Ω–∏–∫–∏ 1.73.0

–ú–Ω–æ–≥–∏–µ –ª—é–¥–∏ —Å–æ–±—Ä–∞–ª–∏—Å—å –≤–º–µ—Å—Ç–µ, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å Rust 1.73.0. –ë–µ–∑ –≤–∞—Å –º—ã –±—ã –Ω–µ —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å. [–°–ø–∞—Å–∏–±–æ!](https://thanks.rust-lang.org/rust/1.73.0/)
