---
layout: post
title: Выпуск Rust 1.44.0: cargo tree, async/await в no_std, Unicode 13 и vec![] в константном контексте
author: The Rust Release Team
release: true
---

Команда Rust рада сообщить о выпуске новой версии, 1.44.0. Rust — это язык программирования, позволяющий каждому создавать надёжное и эффективное программное обеспечение.

Если вы установили предыдущую версию Rust средствами `rustup`, то для обновления до версии 1.44.0 вам достаточно выполнить следующую команду:

```console
rustup update stable
```

Если у вас ещё не установлен `rustup`, вы можете [установить его] с соответствующей страницы нашего веб-сайта, а также посмотреть [подробные примечания к выпуску] на GitHub.

## Что вошло в стабильную версию 1.44.0

Выпуск Rust 1.44 не содержит значительных изменений: мы полировали существующее и стабилизировали несколько API в стандартной библиотеке.

`cargo tree` - очень старое и популярное дополнение для `Cargo`, которое выводит в консоль зависимости проекта в виде дерева. Его первый выпуск был в декабре 2015 и к настоящему моменту у него уже около 50000 загрузок [мы решили добавить его в Cargo].

```text
  mdbook v0.3.2 (/Users/src/rust/mdbook)
├── ammonia v3.0.0
│   ├── html5ever v0.24.0
│   │   ├── log v0.4.8
│   │   │   └── cfg-if v0.1.9
│   │   ├── mac v0.1.1
│   │   └── markup5ever v0.9.0
│   │       ├── log v0.4.8 (*)
│   │       ├── phf v0.7.24
│   │       │   └── phf_shared v0.7.24
│   │       │       ├── siphasher v0.2.3
│   │       │       └── unicase v1.4.2
│   │       │           [build-dependencies]
│   │       │           └── version_check v0.1.5
...
```

Из этого примера мы видим, что `mdbook` зависит от пакета `ammonia`, который в свою очередь зависит от `html5ever`, а он уже от `log`, `mac`, `markup5ever` и так далее.

Также вы можете использовать `cargo tree -d` (сокращение для `cargo tree --duplicates`) для отображения зависимостей разных версий одного и того же пакета. Она отобразит записи для всех версий всех зависимостей и инвертированное дерево зависимостей, показывающее как каждая версия была получена.

Этот выпуск также отмечает расширение возможностей использования `async`/`await`: [теперь их можно использовать в `no_std` контексте]. До этого реализация временно требовала локальной памяти потока. В этом выпуске данное ограничение было убрано, а значит наличие `libstd` больше не обязательно при использовании `async`/`await`.

### Изменения в стандартной библиотеке

`vec![]` [теперь может быть использован] в `const`-контексте. Обратите внимание, что так можно создать только пустой вектор: `vec![]` скомпилируется, а `vec![1, 2, 3]` - нет.

[Добавлена поддержка Unicode 13.]

[`Vec<T>` теперь реализует `From<[T; N]>`](https://github.com/rust-lang/rust/pull/68692/) при `N` меньшем 32.

Дополнительно мы стабилизировали 11 новых API:

- [`PathBuf::with_capacity`]
- [`PathBuf::capacity`]
- [`PathBuf::clear`]
- [`PathBuf::reserve`]
- [`PathBuf::reserve_exact`]
- [`PathBuf::shrink_to_fit`]
- [`f32::to_int_unchecked`]
- [`f64::to_int_unchecked`]
- [`Layout::align_to`]
- [`Layout::pad_to_align`]
- [`Layout::array`]

### Другие изменения

[Синтаксис](https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1440-2020-06-04), [пакетный менеджер Cargo] и [анализатор Clippy] также претерпели некоторые изменения.

## Участники 1.44.0

Множество людей собрались вместе, чтобы создать Rust 1.44.0. Мы не смогли бы сделать это без всех вас, [спасибо](https://thanks.rust-lang.org/rust/1.44.0/)!


[установить его]: https://www.rust-lang.org/install.html
[подробные примечания к выпуску]: https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1440-2020-06-04
[мы решили добавить его в Cargo]: https://github.com/rust-lang/cargo/pull/8062/
[теперь их можно использовать в `no_std` контексте]: https://github.com/rust-lang/rust/pull/69033/
[теперь может быть использован]: https://github.com/rust-lang/rust/pull/70632/
[Добавлена поддержка Unicode 13.]: https://github.com/rust-lang/rust/pull/69929/
[`PathBuf::with_capacity`]: https://github.com/rust-lang/rust/pull/68692/
[`PathBuf::capacity`]: https://doc.rust-lang.org/beta/std/path/struct.PathBuf.html#method.with_capacity
[`PathBuf::clear`]: https://doc.rust-lang.org/beta/std/path/struct.PathBuf.html#method.capacity
[`PathBuf::reserve`]: https://doc.rust-lang.org/beta/std/path/struct.PathBuf.html#method.clear
[`PathBuf::reserve_exact`]: https://doc.rust-lang.org/beta/std/path/struct.PathBuf.html#method.reserve
[`PathBuf::shrink_to_fit`]: https://doc.rust-lang.org/beta/std/path/struct.PathBuf.html#method.reserve_exact
[`f32::to_int_unchecked`]: https://doc.rust-lang.org/beta/std/path/struct.PathBuf.html#method.shrink_to_fit
[`f64::to_int_unchecked`]: https://doc.rust-lang.org/beta/std/primitive.f32.html#method.to_int_unchecked
[`Layout::align_to`]: https://doc.rust-lang.org/beta/std/primitive.f64.html#method.to_int_unchecked
[`Layout::pad_to_align`]: https://doc.rust-lang.org/beta/std/alloc/struct.Layout.html#method.align_to
[`Layout::array`]: https://doc.rust-lang.org/beta/std/alloc/struct.Layout.html#method.pad_to_align
[пакетный менеджер Cargo]: https://doc.rust-lang.org/beta/std/alloc/struct.Layout.html#method.array
[анализатор Clippy]: https://github.com/rust-lang/cargo/blob/master/CHANGELOG.md#cargo-144-2020-06-04
